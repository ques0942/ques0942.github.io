---
title: "plantumlのメモ"
date: 2020-03-30T04:52:08Z
draft: false
---
# plantumlのメモ
plantuml使うにあたって知っていると便利なことをまとめておく。

## マクロ
```
!define arrow(arg1, arg2) arg1 --> arg2
arrow(node1, node2)
```
このように記述するとこれは以下のように展開されて評価される。

```
node1 --> node2
```
ネットワーク図を書くときに以下のように定義しておくと整理が楽になる。

```
!define http(a, b) a --[#magenta]--> b : http
!define grpc(a, b) a --[#blue]--> b : grpc
```

使用できる色の定義は[ここ](https://plantuml.com/ja/color)

## skinparam
以下のようにskinparamを設定しておくと、同じグループのノードをまとめてスタイリングできる。

```
skinparam node {
  backgroundColor<<QA>> PaleGreen
  backgroundColor<<DEVELOP>> LightSkyBlue
}

cloud gcp {
  node "node1" as nd1 <<QA>>
  node "node2" as nd2 <<DEVELOP>> 
}
```

## 図の向き
`top to bottom direction` 、 `left to right direction` のように図の先頭に書いておくと、
図の向きを上から下、左から右のように制御することができる。

## レイアウト
基本的にレイアウトは全て自動で設定されるが、見えないエッジを定義することで多少の制御は可能。あくまでも多少なのできれいにレイアウトすることは諦めたほうが良い。どうしても線が重なって見づらいときなどの緊急避難用。

```
AA -[hidden]u-> up
AA -[hidden]d-> down
AA -[hidden]r-> right
AA -[hidden]l-> left
```
refs: https://forum.plantuml.net/1628/layout-of-grouping-component
refs: https://plantuml.com/ja/class-diagram

