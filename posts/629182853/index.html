<!doctype html><html lang=en-us data-theme><head><meta charset=utf-8><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer-when-downgrade"><title>Go関連のTips - 常にいまいち</title><meta name=description content="blog for something"><link rel=icon type=image/x-icon href=https://blog.app.melvins-nest.com/favicon.ico><link rel=apple-touch-icon-precomposed href=https://blog.app.melvins-nest.com/favicon.png><link rel=stylesheet href="https://blog.app.melvins-nest.com/css/light.css?rnd=1598331127"><style>[data-theme=dark]{--font-color: #eee;--bg-color: #212121;--link-color:#599ada;--link-state-color:#ff5858;--link-state-border-color: rgba(238, 54, 54, 0.5);--thead-bg-color: #343a40;--table-border-color: lightgrey;--pre-color: #333;--pre-bg-color: #f1f1f1;--bq-color: #ccc;--hr-color: #333;--pagination-bg-color: #373737;--pagination-link-color: #b6b6b6;--post-info-color: grey;--switcher-color: #333;--switcher-bg-color: #fff}</style><link rel=stylesheet href="https://blog.app.melvins-nest.com/css/style.css?rnd=1598331127"><meta property="og:title" content="Go関連のTips"><meta property="og:description" content="全部go1.14.3で検証したもの。
部分文字列の切り出し stringsパッケージにも部分文字列の切り出しを行うメソッドはないので、slice操作と同じようにして行う。
このとき注意がいるのが、マルチバイト文字の取り扱い。 単純に以下のようにすると3文字分ではなく3バイト分になる。
s := &#34;あいうえお&#34; fmt.Println(s[:3]) https://play.golang.org/p/ZHXH9FEneRJ
3文字分取り出したい場合は rune を使用する。
s := &#34;あいうえお&#34;fmt.Println(string([]rune(s)[:3]))https://play.golang.org/p/U1rbOpQ8H3c
参考  https://qiita.com/seihmd/items/4a878e7fa340d7963fee  nilへの型アサーション 型付きnilなら型アサーションができる。
if _, ok := (interface{})(nil).(int); !ok { fmt.Println(&#34;no&#34;) // これが表示される } そのため、nilが返ってくる可能性のある関数の返り値に直接型アサーションを実行できる。 例えばこんな感じ。
if _, ok := New().(MyInterface); !ok { fmt.Println(&#34;nil&#34;) } https://play.golang.org/p/ExqB3G-1rN_-"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.app.melvins-nest.com/posts/629182853/"><meta property="article:published_time" content="2020-06-02T13:18:54+00:00"><meta property="article:modified_time" content="2020-06-02T13:18:54+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Go関連のTips"><meta name=twitter:description content="全部go1.14.3で検証したもの。
部分文字列の切り出し stringsパッケージにも部分文字列の切り出しを行うメソッドはないので、slice操作と同じようにして行う。
このとき注意がいるのが、マルチバイト文字の取り扱い。 単純に以下のようにすると3文字分ではなく3バイト分になる。
s := &#34;あいうえお&#34; fmt.Println(s[:3]) https://play.golang.org/p/ZHXH9FEneRJ
3文字分取り出したい場合は rune を使用する。
s := &#34;あいうえお&#34;fmt.Println(string([]rune(s)[:3]))https://play.golang.org/p/U1rbOpQ8H3c
参考  https://qiita.com/seihmd/items/4a878e7fa340d7963fee  nilへの型アサーション 型付きnilなら型アサーションができる。
if _, ok := (interface{})(nil).(int); !ok { fmt.Println(&#34;no&#34;) // これが表示される } そのため、nilが返ってくる可能性のある関数の返り値に直接型アサーションを実行できる。 例えばこんな感じ。
if _, ok := New().(MyInterface); !ok { fmt.Println(&#34;nil&#34;) } https://play.golang.org/p/ExqB3G-1rN_-"></head><body><a class=skip-main href=#main>Skip to main content</a><div class=container><header class=common-header><h1 class=site-title><a href=/>常にいまいち</a></h1><nav></nav></header><main id=main tabindex=-1><article class=post><header class=post-header><h1 class=post-title>Go関連のTips</h1></header><div class=content><p>全部go1.14.3で検証したもの。</p><h2 id=部分文字列の切り出し>部分文字列の切り出し</h2><p>stringsパッケージにも部分文字列の切り出しを行うメソッドはないので、slice操作と同じようにして行う。</p><p>このとき注意がいるのが、マルチバイト文字の取り扱い。
単純に以下のようにすると3文字分ではなく3バイト分になる。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>s := <span style=color:#87ceeb>&#34;あいうえお&#34;</span>
fmt.<span style=color:#ff0>Println</span>(s[:<span style=color:#f60>3</span>])
</code></pre></div><p><a href=https://play.golang.org/p/ZHXH9FEneRJ>https://play.golang.org/p/ZHXH9FEneRJ</a></p><p>3文字分取り出したい場合は <code>rune</code> を使用する。</p><pre><code>s := &quot;あいうえお&quot;
fmt.Println(string([]rune(s)[:3]))
</code></pre><p><a href=https://play.golang.org/p/U1rbOpQ8H3c>https://play.golang.org/p/U1rbOpQ8H3c</a></p><h3 id=参考>参考</h3><ul><li><a href=https://qiita.com/seihmd/items/4a878e7fa340d7963fee>https://qiita.com/seihmd/items/4a878e7fa340d7963fee</a></li></ul><h2 id=nilへの型アサーション>nilへの型アサーション</h2><p>型付きnilなら型アサーションができる。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:red>if</span> _, ok := (<span style=color:red>interface</span>{})(<span style=color:red>nil</span>).(<span style=color:violet>int</span>); !ok {
	fmt.<span style=color:#ff0>Println</span>(<span style=color:#87ceeb>&#34;no&#34;</span>) <span style=color:#0f0>// これが表示される
</span><span style=color:#0f0></span>}
</code></pre></div><p>そのため、nilが返ってくる可能性のある関数の返り値に直接型アサーションを実行できる。
例えばこんな感じ。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:red>if</span> _, ok := <span style=color:#ff0>New</span>().(MyInterface); !ok {
	fmt.<span style=color:#ff0>Println</span>(<span style=color:#87ceeb>&#34;nil&#34;</span>)
}
</code></pre></div><p><a href=https://play.golang.org/p/ExqB3G-1rN_->https://play.golang.org/p/ExqB3G-1rN_-</a></p></div><div class=post-info><div class=post-date>2020-06-02</div><div class=post-taxonomies></div></div></article><div class="pagination post-pagination"><div class="left pagination-item"><a href=/posts/629278766/>Kubernetesのenvは後勝ち</a></div><div class="right pagination-item"><a href=/posts/628325048/>GCSへのアクセス制御(特定ドメインのアカウントだけにアクセスを許可する)</a></div></div></main><footer class=common-footer><div class=copyright><p>© ques0942, 2020<br>Powered by <a target=_blank rel="noopener noreferrer" href=https://gohugo.io/>Hugo</a>, theme <a target=_blank rel="noopener noreferrer" href=https://github.com/mitrichius/hugo-theme-anubis>Anubis</a>.</p></div></footer></div></body></html>